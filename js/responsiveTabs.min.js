// ResponsiveTabs.js | Version:1.13 | Author:Pete Love | www.petelove.com
(function(e){e.fn.responsiveTabs=function(t){return this.each(function(t){var n={targetClass:"responsive-tabs",defaultSpeed:0,responsiveSpeed:150,scrollOffset:0,onTabShow:function(){},onTabHide:function(){}};var r=e.extend({},n,t),i=e(this);if(!i.hasClass(r.targetClass+"--enabled")){i.addClass(r.targetClass+"--enabled");var s=1;i.each(function(){var t=e(this);t.children(":header").addClass(r.targetClass+"__heading");t.children("div").addClass(r.targetClass+"__panel");var n=t.find("."+r.targetClass+"__panel--active");if(!n.length){n=t.find("."+r.targetClass+"__panel").first().addClass(r.targetClass+"__panel--active")}t.find("."+r.targetClass+"__panel").not("."+r.targetClass+"__panel--active").hide().attr("aria-hidden","true");n.attr("aria-hidden","false");n.addClass(r.targetClass+"__panel--closed-accordion-only");var i=e("<div/>",{"class":r.targetClass+"-wrapper"});t.wrap(i);var o=0;t.find("."+r.targetClass+"__panel").each(function(){var t=e(this).height();if(t>o){o=t}});var u=e("<ul/>",{"class":r.targetClass+"__list",role:"tablist"});var a=1;t.find("."+r.targetClass+"__heading").each(function(){var n=e(this);var f=e(this).next();n.attr("tabindex",0);var l=e("<li/>",{"class":r.targetClass+"__list__item",id:"tablist"+s+"-tab"+a,"aria-controls":"tablist"+s+"-panel"+a,role:"tab",tabindex:0,text:n.text(),keydown:function(e){if(e.keyCode===13){l.click()}},click:function(){i.css("height",o);t.find("."+r.targetClass+"__panel--closed-accordion-only").removeClass(r.targetClass+"__panel--closed-accordion-only");t.find("."+r.targetClass+"__panel--active").toggle(r.defaultSpeed,function(){r.onTabHide.call(this)}).removeClass(r.targetClass+"__panel--active").attr("aria-hidden","true").prev().removeClass(r.targetClass+"__heading--active");f.toggle(r.defaultSpeed,function(){r.onTabShow.call(this)}).addClass(r.targetClass+"__panel--active").attr("aria-hidden","false");n.addClass(r.targetClass+"__heading--active");u.find("."+r.targetClass+"__list__item--active").removeClass(r.targetClass+"__list__item--active");l.addClass(r.targetClass+"__list__item--active");i.css("height","auto")}});f.attr({role:"tabpanel","aria-labelledby":l.attr("id"),id:"tablist"+s+"-panel"+a});if(f.hasClass(r.targetClass+"__panel--active")){l.addClass(r.targetClass+"__list__item--active")}u.append(l);n.keydown(function(e){if(e.keyCode===13){n.click()}});n.click(function(){t.find("."+r.targetClass+"__panel--closed-accordion-only").removeClass(r.targetClass+"__panel--closed-accordion-only");if(!n.hasClass(r.targetClass+"__heading--active")){var i,s=t.find("."+r.targetClass+"__heading--active");if(s.length){i=s.offset().top}t.find("."+r.targetClass+"__panel--active").slideToggle(r.responsiveSpeed,function(){r.onTabHide.call(this)}).removeClass(r.targetClass+"__panel--active").prev().removeClass(r.targetClass+"__heading--active");t.find("."+r.targetClass+"__panel").hide().attr("aria-hidden","true");f.slideToggle(r.responsiveSpeed,function(){r.onTabShow.call(this)}).addClass(r.targetClass+"__panel--active").attr("aria-hidden","false");n.addClass(r.targetClass+"__heading--active");var o=t.find("."+r.targetClass+"__list__item--active");o.removeClass(r.targetClass+"__list__item--active");var u=f.attr("id");var a=u.replace("panel","tab");e("#"+a).addClass(r.targetClass+"__list__item--active");var l=t.offset().top-r.scrollOffset;var c=n.offset().top-15-r.scrollOffset;if(i<c){e("html, body").animate({scrollTop:l},0).animate({scrollTop:c},400)}}else{f.removeClass(r.targetClass+"__panel--active").slideToggle(r.responsiveSpeed,function(){e(this).addClass(r.targetClass+"__panel--closed-accordion-only");r.onTabHide.call(this)});n.removeClass(r.targetClass+"__heading--active")}});a++});t.prepend(u);s++})}})}})(jQuery)