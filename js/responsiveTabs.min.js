// ResponsiveTabs.js | Version:1.13 | Author:Pete Love | www.petelove.com
(function(e){e.fn.responsiveTabs=function(t){var n={targetClass:"responsive-tabs",defaultSpeed:0,responsiveSpeed:150,scrollOffset:0,onTabShow:function(){},onTabHide:function(){}};var r=e.extend({},n,t),i=1;return this.each(function(){var t=e(this);if(!t.hasClass(r.targetClass+"--enabled")){t.addClass(r.targetClass+"--enabled");var n=e(this);n.children(":header").addClass(r.targetClass+"__heading");n.children("div").addClass(r.targetClass+"__panel");var s=n.find("."+r.targetClass+"__panel--active");if(!s.length){s=n.find("."+r.targetClass+"__panel").first().addClass(r.targetClass+"__panel--active")}n.find("."+r.targetClass+"__panel").not("."+r.targetClass+"__panel--active").hide().attr("aria-hidden","true");s.attr("aria-hidden","false");s.addClass(r.targetClass+"__panel--closed-accordion-only");var o=e("<div/>",{"class":r.targetClass+"-wrapper"});n.wrap(o);var u=0;n.find("."+r.targetClass+"__panel").each(function(){var t=e(this).height();if(t>u){u=t}});var a=e("<ul/>",{"class":r.targetClass+"__list",role:"tablist"});var f=1;n.find("."+r.targetClass+"__heading").each(function(){var t=e(this);var s=e(this).next();t.attr("tabindex",0);var l=e("<li/>",{"class":r.targetClass+"__list__item",id:"tablist"+i+"-tab"+f,"aria-controls":"tablist"+i+"-panel"+f,role:"tab",tabindex:0,text:t.text(),keydown:function(e){if(e.keyCode===13){l.click()}},click:function(){o.css("height",u);n.find("."+r.targetClass+"__panel--closed-accordion-only").removeClass(r.targetClass+"__panel--closed-accordion-only");n.find("."+r.targetClass+"__panel--active").toggle(r.defaultSpeed,function(){r.onTabHide.call(this)}).removeClass(r.targetClass+"__panel--active").attr("aria-hidden","true").prev().removeClass(r.targetClass+"__heading--active");s.toggle(r.defaultSpeed,function(){r.onTabShow.call(this)}).addClass(r.targetClass+"__panel--active").attr("aria-hidden","false");t.addClass(r.targetClass+"__heading--active");a.find("."+r.targetClass+"__list__item--active").removeClass(r.targetClass+"__list__item--active");l.addClass(r.targetClass+"__list__item--active");o.css("height","auto")}});s.attr({role:"tabpanel","aria-labelledby":l.attr("id"),id:"tablist"+i+"-panel"+f});if(s.hasClass(r.targetClass+"__panel--active")){l.addClass(r.targetClass+"__list__item--active")}a.append(l);t.keydown(function(e){if(e.keyCode===13){t.click()}});t.click(function(){n.find("."+r.targetClass+"__panel--closed-accordion-only").removeClass(r.targetClass+"__panel--closed-accordion-only");if(!t.hasClass(r.targetClass+"__heading--active")){var i,o=n.find("."+r.targetClass+"__heading--active");if(o.length){i=o.offset().top}n.find("."+r.targetClass+"__panel--active").slideToggle(r.responsiveSpeed,function(){r.onTabHide.call(this)}).removeClass(r.targetClass+"__panel--active").prev().removeClass(r.targetClass+"__heading--active");n.find("."+r.targetClass+"__panel").hide().attr("aria-hidden","true");s.slideToggle(r.responsiveSpeed,function(){r.onTabShow.call(this)}).addClass(r.targetClass+"__panel--active").attr("aria-hidden","false");t.addClass(r.targetClass+"__heading--active");var u=n.find("."+r.targetClass+"__list__item--active");u.removeClass(r.targetClass+"__list__item--active");var a=s.attr("id");var f=a.replace("panel","tab");e("#"+f).addClass(r.targetClass+"__list__item--active");var l=n.offset().top-r.scrollOffset;var c=t.offset().top-15-r.scrollOffset;if(i<c){e("html, body").animate({scrollTop:l},0).animate({scrollTop:c},400)}}else{s.removeClass(r.targetClass+"__panel--active").slideToggle(r.responsiveSpeed,function(){e(this).addClass(r.targetClass+"__panel--closed-accordion-only");r.onTabHide.call(this)});t.removeClass(r.targetClass+"__heading--active")}});f++;n.prepend(a)});i++}})}})(jQuery)